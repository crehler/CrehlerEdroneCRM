"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["crehler-edrone-crm"],{2743:(e,t,o)=>{var n,s,i,r=o(6285),a=o(8553),c=o(7606),l=o(9658);class d extends r.Z{init(){this._cookieEnabledName="edrone-crm-enabled",this.handleCookieChangeEvent(),c.Z.getItem(this._cookieEnabledName)&&this.startEdroneCrm()}startEdroneCrm(){window.edroneCrmCallback(),this._registerEvents()}handleCookieChangeEvent(){document.$emitter.subscribe(a.Du,this.handleCookies.bind(this))}handleCookies(e){const t=e.detail;t.hasOwnProperty(this._cookieEnabledName)&&t[this._cookieEnabledName]&&this.startEdroneCrm()}_registerEvents(){const e=l.Z.isTouchDevice()?"touchend":"click";[...document.querySelectorAll(this.options.buyButtonSelector)].forEach((t=>t.addEventListener(e,this._onAddToCard.bind(this))))}_onAddToCard(e){document.querySelector(this.options.productPageSelector)||this._prepareEdrone(e),window._edrone.action_type="add_to_cart",window._edrone.init()}_prepareEdrone(e){const t=e.target.closest(this.options.productCardSelector);window._edrone.product_skus=t.querySelector(this.options.productNumberSelector).content,window._edrone.product_ids=t.querySelector(this.options.productIdSelector).value,window._edrone.product_titles=t.querySelector(this.options.productNameSelector).value,window._edrone.product_images=t.querySelector(this.options.imageWrapperSelector+" img").src,window._edrone.product_urls=t.querySelector(this.options.productLinkSelector).href,window._edrone.product_availability="1",window._edrone.product_category_names=document.querySelector(this.options.listingBreadcrumbSelector).innerText.replace("\n","~")}}n=d,i={buyButtonSelector:".btn-buy",productCardSelector:".product-box",listingBreadcrumbSelector:".breadcrumb",productPageSelector:".is-ctl-product",imageWrapperSelector:".product-image-wrapper",productLinkSelector:".product-name",productNameSelector:'input[name="product-name"]',productIdSelector:'input[name="product-id"]',productNumberSelector:'meta[itemprop="mpn"]'},(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(s="options"))in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;window.PluginManager.register("EdroneCrm",d)},8553:(e,t,o)=>{o.d(t,{Du:()=>l,UK:()=>d,ZP:()=>u});var n=o(6285),s=o(7606),i=o(2615),r=o(3637),a=o(8254),c=o(4690);const l="CookieConfiguration_Update",d="CookieConfiguration_CloseOffCanvas";class u extends n.Z{init(){this.lastState={active:[],inactive:[]},this._httpClient=new a.Z,this._registerEvents()}_registerEvents(){const{submitEvent:e,buttonOpenSelector:t,customLinkSelector:o,globalButtonAcceptAllSelector:n}=this.options;Array.from(document.querySelectorAll(t)).forEach((t=>{t.addEventListener(e,this.openOffCanvas.bind(this))})),Array.from(document.querySelectorAll(o)).forEach((t=>{t.addEventListener(e,this._handleCustomLink.bind(this))})),Array.from(document.querySelectorAll(n)).forEach((t=>{t.addEventListener(e,this._acceptAllCookiesFromCookieBar.bind(this))}))}_registerOffCanvasEvents(){const{submitEvent:e,buttonSubmitSelector:t,buttonAcceptAllSelector:o,wrapperToggleSelector:n}=this.options,i=this._getOffCanvas();if(i){const r=i.querySelector(t),a=i.querySelector(o),c=Array.from(i.querySelectorAll('input[type="checkbox"]')),l=Array.from(i.querySelectorAll(n));r&&r.addEventListener(e,this._handleSubmit.bind(this,s.Z)),a&&a.addEventListener(e,this._acceptAllCookiesFromOffCanvas.bind(this,s.Z)),c.forEach((t=>{t.addEventListener(e,this._handleCheckbox.bind(this))})),l.forEach((t=>{t.addEventListener(e,this._handleWrapperTrigger.bind(this))}))}}_handleCustomLink(e){e.preventDefault(),this.openOffCanvas()}_handleUpdateListener(e,t){const o=this._getUpdatedCookies(e,t);document.$emitter.publish(l,o)}_getUpdatedCookies(e,t){const{lastState:o}=this,n={};return e.forEach((e=>{o.inactive.includes(e)&&(n[e]=!0)})),t.forEach((e=>{o.active.includes(e)&&(n[e]=!1)})),n}openOffCanvas(e){const{offCanvasPosition:t}=this.options,o=window.router["frontend.cookie.offcanvas"];this._hideCookieBar(),i.Z.open(o,!1,this._onOffCanvasOpened.bind(this,e),t)}closeOffCanvas(e){i.Z.close(),"function"==typeof e&&e()}_onOffCanvasOpened(e){this._registerOffCanvasEvents(),this._setInitialState(),this._setInitialOffcanvasState(),PluginManager.initializePlugins(),"function"==typeof e&&e()}_hideCookieBar(){const e=PluginManager.getPluginInstances("CookiePermission");e&&e[0]&&(e[0]._hideCookieBar(),e[0]._removeBodyPadding())}_setInitialState(e=null){const t=e||this._getCookies("all"),o=[],n=[];t.forEach((({cookie:e,required:t})=>{s.Z.getItem(e)||t?o.push(e):n.push(e)})),this.lastState={active:o,inactive:n}}_setInitialOffcanvasState(){const e=this.lastState.active,t=this._getOffCanvas();e.forEach((e=>{const o=t.querySelector(`[data-cookie="${e}"]`);o.checked=!0,this._childCheckboxEvent(o)}))}_handleWrapperTrigger(e){e.preventDefault();const{entriesActiveClass:t,entriesClass:o,groupClass:n}=this.options,{target:s}=e,i=this._findParentEl(s,o,n);if(i){i.classList.contains(t)?i.classList.remove(t):i.classList.add(t)}}_handleCheckbox(e){const{parentInputClass:t}=this.options,{target:o}=e;(o.classList.contains(t)?this._parentCheckboxEvent:this._childCheckboxEvent).call(this,o)}_findParentEl(e,t,o=null){for(;e&&!e.classList.contains(o);){if(e.classList.contains(t))return e;e=e.parentElement}return null}_isChecked(e){return!!e.checked}_parentCheckboxEvent(e){const{groupClass:t}=this.options,o=this._isChecked(e),n=this._findParentEl(e,t);this._toggleWholeGroup(o,n)}_childCheckboxEvent(e){const{groupClass:t}=this.options,o=this._isChecked(e),n=this._findParentEl(e,t);this._toggleParentCheckbox(o,n)}_toggleWholeGroup(e,t){Array.from(t.querySelectorAll("input")).forEach((t=>{t.checked=e}))}_toggleParentCheckbox(e,t){const{parentInputSelector:o}=this.options,n=Array.from(t.querySelectorAll(`input:not(${o})`)),s=Array.from(t.querySelectorAll(`input:not(${o}):checked`));if(n.length>0){const e=t.querySelector(o);if(e){const t=s.length>0,o=t&&s.length!==n.length;e.checked=t,e.indeterminate=o}}}_handleSubmit(){const e=this._getCookies("active"),t=this._getCookies("inactive"),{cookiePreference:o}=this.options,n=[],i=[];t.forEach((({cookie:e})=>{i.push(e),s.Z.getItem(e)&&s.Z.removeItem(e)})),e.forEach((({cookie:e,value:t,expiration:o})=>{n.push(e),e&&t&&s.Z.setItem(e,t,o)})),s.Z.setItem(o,"1","30"),this._handleUpdateListener(n,i),this.closeOffCanvas(document.$emitter.publish(d))}acceptAllCookies(e=!1){if(!e)return this._handleAcceptAll(),void this.closeOffCanvas();c.Z.create(this.el);const t=window.router["frontend.cookie.offcanvas"];this._httpClient.get(t,(e=>{const t=(new DOMParser).parseFromString(e,"text/html");this._handleAcceptAll(t),c.Z.remove(this.el),this._hideCookieBar()}))}_acceptAllCookiesFromCookieBar(){return this.acceptAllCookies(!0)}_acceptAllCookiesFromOffCanvas(){return this.acceptAllCookies()}_handleAcceptAll(e=null){const t=this._getCookies("all",e);this._setInitialState(t);const{cookiePreference:o}=this.options;t.forEach((({cookie:e,value:t,expiration:o})=>{e&&t&&s.Z.setItem(e,t,o)})),s.Z.setItem(o,"1","30"),this._handleUpdateListener(t.map((({cookie:e})=>e)),[])}_getCookies(e="all",t=null){const{cookieSelector:o}=this.options;return t||(t=this._getOffCanvas()),Array.from(t.querySelectorAll(o)).filter((t=>{switch(e){case"all":return!0;case"active":return this._isChecked(t);case"inactive":return!this._isChecked(t);default:return!1}})).map((e=>{const{cookie:t,cookieValue:o,cookieExpiration:n,cookieRequired:s}=e.dataset;return{cookie:t,value:o,expiration:n,required:s}}))}_getOffCanvas(){const e=r.Z?r.Z.getOffCanvas():[];return!!(e&&e.length>0)&&e[0]}}var f,h,p;f=u,h="options",p={offCanvasPosition:"left",submitEvent:"click",cookiePreference:"cookie-preference",cookieSelector:"[data-cookie]",buttonOpenSelector:".js-cookie-configuration-button button",buttonSubmitSelector:".js-offcanvas-cookie-submit",buttonAcceptAllSelector:".js-offcanvas-cookie-accept-all",globalButtonAcceptAllSelector:".js-cookie-accept-all-button",wrapperToggleSelector:".offcanvas-cookie-entries span",parentInputSelector:".offcanvas-cookie-parent-input",customLinkSelector:`[href="${window.router["frontend.cookie.offcanvas"]}"]`,entriesActiveClass:"offcanvas-cookie-entries--active",entriesClass:"offcanvas-cookie-entries",groupClass:"offcanvas-cookie-group",parentInputClass:"offcanvas-cookie-parent-input"},(h=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(h))in f?Object.defineProperty(f,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):f[h]=p},2615:(e,t,o)=>{o.d(t,{Z:()=>a});var n=o(3637),s=o(8254),i=o(7906);let r=null;class a extends n.Z{static open(e=!1,t=!1,o=null,s="left",i=!0,r=n.Z.REMOVE_OFF_CANVAS_DELAY(),a=!1,c=""){if(!e)throw new Error("A url must be given!");n.r._removeExistingOffCanvas();const l=n.r._createOffCanvas(s,a,c,i);this.setContent(e,t,o,i,r),n.r._openOffcanvas(l)}static setContent(e,t,o,n,c){const l=new s.Z;super.setContent(`<div class="offcanvas-body">${i.Z.getTemplate()}</div>`,n,c),r&&r.abort();const d=e=>{super.setContent(e,n,c),"function"==typeof o&&o(e)};r=t?l.post(e,t,a.executeCallback.bind(this,d)):l.get(e,a.executeCallback.bind(this,d))}static executeCallback(e,t){"function"==typeof e&&e(t),window.PluginManager.initializePlugins()}}},3637:(e,t,o)=>{o.d(t,{Z:()=>d,r:()=>l});var n=o(9658),s=o(2005),i=o(1966);const r="offcanvas",a=350;class c{constructor(){this.$emitter=new s.Z}open(e,t,o,n,s,i,r){this._removeExistingOffCanvas();const a=this._createOffCanvas(o,i,r,n);this.setContent(e,n,s),this._openOffcanvas(a,t)}setContent(e,t,o){const n=this.getOffCanvas();n[0]&&(n[0].innerHTML=e,this._registerEvents(o))}setAdditionalClassName(e){this.getOffCanvas()[0].classList.add(e)}getOffCanvas(){return document.querySelectorAll(`.${r}`)}close(e){const t=this.getOffCanvas();i.Z.iterate(t,(e=>{bootstrap.Offcanvas.getInstance(e).hide()})),setTimeout((()=>{this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:t})}),e)}goBackInHistory(){window.history.back()}exists(){return this.getOffCanvas().length>0}_openOffcanvas(e,t){c.bsOffcanvas.show(),window.history.pushState("offcanvas-open",""),"function"==typeof t&&t()}_registerEvents(e){const t=n.Z.isTouchDevice()?"touchend":"click",o=this.getOffCanvas();i.Z.iterate(o,(t=>{const n=()=>{setTimeout((()=>{t.remove(),this.$emitter.publish("onCloseOffcanvas",{offCanvasContent:o})}),e),t.removeEventListener("hide.bs.offcanvas",n)};t.addEventListener("hide.bs.offcanvas",n)})),window.addEventListener("popstate",this.close.bind(this,e),{once:!0});const s=document.querySelectorAll(".js-offcanvas-close");i.Z.iterate(s,(o=>o.addEventListener(t,this.close.bind(this,e))))}_removeExistingOffCanvas(){c.bsOffcanvas=null;const e=this.getOffCanvas();return i.Z.iterate(e,(e=>e.remove()))}_getPositionClass(e){return"left"===e?"offcanvas-start":"right"===e?"offcanvas-end":`offcanvas-${e}`}_createOffCanvas(e,t,o,n){const s=document.createElement("div");if(s.classList.add(r),s.classList.add(this._getPositionClass(e)),!0===t&&s.classList.add("is-fullwidth"),o){const e=typeof o;if("string"===e)s.classList.add(o);else{if(!Array.isArray(o))throw new Error(`The type "${e}" is not supported. Please pass an array or a string.`);o.forEach((e=>{s.classList.add(e)}))}}return document.body.appendChild(s),c.bsOffcanvas=new bootstrap.Offcanvas(s,{backdrop:!1!==n||"static"}),s}}const l=Object.freeze(new c);class d{static open(e,t=null,o="left",n=!0,s=350,i=!1,r=""){l.open(e,t,o,n,s,i,r)}static setContent(e,t=!0,o=350){l.setContent(e,t,o)}static setAdditionalClassName(e){l.setAdditionalClassName(e)}static close(e=350){l.close(e)}static exists(){return l.exists()}static getOffCanvas(){return l.getOffCanvas()}static REMOVE_OFF_CANVAS_DELAY(){return a}}}},e=>{e.O(0,["vendor-node","vendor-shared"],(()=>{return t=2743,e(e.s=t);var t}));e.O()}]);